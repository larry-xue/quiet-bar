---
import siteData from '../data/site.json';

const phoneHref = `tel:${siteData.phone.replace(/[^0-9+]/g, '')}`;
const mapsUrl = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(siteData.address.full)}`;
---

<nav class="info-bar" aria-label="Quick contact information">
  <div class="info-bar__content">
    <div class="info-bar__item info-bar__item--established">
      <span class="info-bar__label" aria-hidden="true">Est.</span>
      <span class="info-bar__value">{siteData.established}</span>
    </div>
    
    <a 
      href={phoneHref} 
      class="info-bar__item info-bar__item--phone"
      aria-label={`Call us at ${siteData.phone}`}
    >
      <span class="info-bar__icon" aria-hidden="true">☎</span>
      <span class="info-bar__value">{siteData.phone}</span>
    </a>
    
    <a 
      href={mapsUrl} 
      class="info-bar__item info-bar__item--address"
      target="_blank"
      rel="noopener noreferrer"
      aria-label={`View ${siteData.address.short} on map (opens in new tab)`}
    >
      <span class="info-bar__icon" aria-hidden="true">⚐</span>
      <span class="info-bar__value">{siteData.address.short}</span>
    </a>
  </div>
</nav>

<style>
  .info-bar {
    position: sticky;
    top: 0;
    z-index: var(--z-sticky);
    background-color: var(--color-bg-mid);
    border-bottom: 1px solid rgba(201, 162, 39, 0.2);
    box-shadow: var(--shadow-soft);
  }
  
  .info-bar__content {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-6);
    padding: var(--space-3) var(--space-4);
    max-width: var(--container-max);
    margin-inline: auto;
    flex-wrap: wrap;
  }
  
  .info-bar__item {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
    color: var(--color-text);
    text-decoration: none;
    transition: color var(--transition-fast);
  }
  
  a.info-bar__item:hover {
    color: var(--color-primary);
  }
  
  a.info-bar__item:focus-visible {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
  }
  
  .info-bar__label {
    color: var(--color-text-muted);
    text-transform: uppercase;
    font-size: var(--text-xs);
    letter-spacing: 0.1em;
  }
  
  .info-bar__icon {
    font-size: var(--text-base);
    color: var(--color-primary);
  }
  
  .info-bar__value {
    font-weight: 600;
  }
  
  /* Separator between items on desktop */
  .info-bar__item:not(:last-child)::after {
    content: '|';
    margin-left: var(--space-6);
    color: var(--color-bg-light);
    font-weight: 300;
  }
  
  @media (max-width: 640px) {
    .info-bar {
      position: fixed;
      top: auto;
      bottom: 0;
      left: 0;
      right: 0;
      border-bottom: none;
      border-top: 1px solid rgba(201, 162, 39, 0.2);
    }
    
    .info-bar__content {
      gap: var(--space-2);
      padding: var(--space-2) var(--space-3);
    }
    
    .info-bar__item {
      flex: 1;
      justify-content: center;
      padding: var(--space-2);
      border-radius: var(--radius-sm);
    }
    
    .info-bar__item:not(:last-child)::after {
      display: none;
    }
    
    .info-bar__item--established {
      display: none;
    }
    
    .info-bar__value {
      font-size: var(--text-xs);
    }
    
    .info-bar__icon {
      font-size: var(--text-sm);
    }
    
    /* Add padding to body for fixed bottom bar */
    :global(body) {
      padding-bottom: 60px;
    }
  }
  
  @media (min-width: 641px) and (max-width: 768px) {
    .info-bar__item--address .info-bar__value {
      max-width: 180px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
  }
</style>

