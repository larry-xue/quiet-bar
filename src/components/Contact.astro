---
import siteData from '../data/site.json';

const phoneHref = `tel:${siteData.phone.replace(/[^0-9+]/g, '')}`;
const emailHref = `mailto:${siteData.email}`;
---

<section class="contact section" aria-labelledby="contact-title" id="contact">
  <div class="container container--narrow">
    <h2 id="contact-title" class="section__title">Get In Touch</h2>
    
    <div class="contact__grid">
      <a href={phoneHref} class="contact__card" aria-label={`Call us at ${siteData.phone}`}>
        <span class="contact__icon" aria-hidden="true">☎</span>
        <span class="contact__label">Phone</span>
        <span class="contact__value">{siteData.phone}</span>
      </a>
      
      <a href={emailHref} class="contact__card" aria-label={`Email us at ${siteData.email}`}>
        <span class="contact__icon" aria-hidden="true">✉</span>
        <span class="contact__label">Email</span>
        <span class="contact__value">{siteData.email}</span>
      </a>
      
      {siteData.social?.instagram && (
        <a 
          href={siteData.social.instagram} 
          class="contact__card"
          target="_blank"
          rel="noopener noreferrer"
          aria-label="Follow us on Instagram (opens in new tab)"
        >
          <span class="contact__icon" aria-hidden="true">◉</span>
          <span class="contact__label">Instagram</span>
          <span class="contact__value">@quietbarnyc</span>
        </a>
      )}
    </div>
    
    {siteData.notices && siteData.notices.length > 0 && (
      <aside class="contact__notices" aria-labelledby="notices-heading">
        <h3 id="notices-heading" class="contact__notices-title">Please Note</h3>
        <ul class="contact__notices-list" role="list">
          {siteData.notices.map((notice: string) => (
            <li class="contact__notice">{notice}</li>
          ))}
        </ul>
      </aside>
    )}
  </div>
</section>

<style>
  .contact__grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--space-4);
    margin-bottom: var(--space-10);
  }
  
  .contact__card {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: var(--space-6);
    background-color: var(--color-bg-mid);
    border: 1px solid rgba(201, 162, 39, 0.15);
    border-radius: var(--radius-md);
    text-decoration: none;
    text-align: center;
    transition: all var(--transition-fast);
  }
  
  .contact__card:hover {
    background-color: var(--color-bg-light);
    border-color: var(--color-primary);
    transform: translateY(-2px);
  }
  
  .contact__card:focus-visible {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
  }
  
  .contact__icon {
    font-size: var(--text-2xl);
    color: var(--color-primary);
    margin-bottom: var(--space-3);
  }
  
  .contact__label {
    font-size: var(--text-xs);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    color: var(--color-text-muted);
    margin-bottom: var(--space-1);
  }
  
  .contact__value {
    font-weight: 600;
    color: var(--color-secondary);
  }
  
  .contact__notices {
    padding: var(--space-6);
    background: 
      linear-gradient(135deg, rgba(168, 90, 50, 0.1) 0%, rgba(201, 162, 39, 0.05) 100%);
    border: 2px solid var(--color-accent);
    border-radius: var(--radius-md);
    text-align: center;
  }
  
  .contact__notices-title {
    font-family: var(--font-body);
    font-size: var(--text-sm);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    color: var(--color-accent);
    margin-bottom: var(--space-4);
  }
  
  .contact__notices-list {
    list-style: none;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: var(--space-3) var(--space-6);
  }
  
  .contact__notice {
    font-size: var(--text-sm);
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--color-secondary);
    position: relative;
  }
  
  .contact__notice:not(:last-child)::after {
    content: '•';
    position: absolute;
    right: calc(var(--space-6) * -0.5 - 0.25em);
    color: var(--color-accent);
    opacity: 0.5;
  }
  
  @media (max-width: 640px) {
    .contact__grid {
      grid-template-columns: 1fr;
    }
    
    .contact__card {
      flex-direction: row;
      gap: var(--space-4);
      text-align: left;
      padding: var(--space-4);
    }
    
    .contact__icon {
      font-size: var(--text-xl);
      margin-bottom: 0;
    }
    
    .contact__notices-list {
      flex-direction: column;
      gap: var(--space-2);
    }
    
    .contact__notice:not(:last-child)::after {
      display: none;
    }
  }
</style>

